<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bootstrap Dark Multi-Image to PDF Converter</title>
<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body {
    background-color: #121212;
    color: #fff;
    min-height: 100vh;
    padding: 40px 15px;
    font-family: 'Segoe UI', sans-serif;
  }

  h1 {
    text-align: center;
    margin-bottom: 30px;
    font-weight: bold;
    color: #00ffcc;
    text-shadow: 0 0 10px #00ffcc;
  }

  .card-container {
    background-color: #1f1f1f;
    color: #fff;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 255, 204, 0.2);
    width: 100%;
    max-width: 700px;
    margin: 0 auto;
  }

  input[type="file"] {
    margin-bottom: 15px;
  }

  #preview {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
  }

  #preview .card {
    width: 130px;
    border-radius: 15px;
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,255,204,0.2);
    background-color: #2c2c2c;
  }

  #preview .card:hover {
    transform: scale(1.1);
    box-shadow: 0 10px 25px rgba(0,255,204,0.4);
  }

  .card-img-container {
    position: relative;
  }

  .remove-btn {
    position: absolute;
    top: 5px;
    right: 5px;
    background: #ff4b2b;
    border: none;
    color: white;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.3s;
  }

  .remove-btn:hover {
    background: #ff1c00;
  }

  select, .btn {
    border-radius: 50px;
  }

  .btn-primary {
    background: linear-gradient(135deg, #00ffcc, #00b3ff);
    border: none;
    color: #121212;
    font-weight: bold;
  }

  .btn-primary:hover {
    background: linear-gradient(135deg, #00b3ff, #00ffcc);
    color: #121212;
  }

  .btn-success {
    background: linear-gradient(135deg, #ff4b2b, #ff416c);
    border: none;
    font-weight: bold;
  }

  .btn-success:hover {
    background: linear-gradient(135deg, #ff416c, #ff4b2b);
  }

  select {
    background-color: #2c2c2c;
    color: #fff;
    border: none;
    font-weight: bold;
  }
</style>
</head>
<body>

<div class="container">
  <h1>PDF Converter</h1>
  <div class="card-container">
    <input type="file" id="images" multiple accept="image/*" class="form-control">
    <div class="d-flex justify-content-between flex-wrap mb-3 gap-2">
      <button id="addImagesBtn" class="btn btn-primary flex-grow-1">Add More Images</button>
      <select id="pageSize" class="form-select w-auto flex-grow-1">
        <option value="a4">A4</option>
        <option value="letter">Letter</option>
      </select>
      <select id="orientation" class="form-select w-auto flex-grow-1">
        <option value="p">Portrait</option>
        <option value="l">Landscape</option>
      </select>
      <button id="convertBtn" class="btn btn-success flex-grow-1">Convert to PDF</button>
    </div>
    <div id="preview"></div>
  </div>
</div>

<!-- jsPDF library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const preview = document.getElementById('preview');
  const imagesInput = document.getElementById('images');
  const addImagesBtn = document.getElementById('addImagesBtn');
  const convertBtn = document.getElementById('convertBtn');
  const pageSizeSelect = document.getElementById('pageSize');
  const orientationSelect = document.getElementById('orientation');

  let imageFiles = [];

  imagesInput.addEventListener('change', (event) => {
    const newFiles = Array.from(event.target.files);
    imageFiles = imageFiles.concat(newFiles);
    previewImages();
    imagesInput.value = '';
  });

  addImagesBtn.addEventListener('click', () => imagesInput.click());

  function previewImages() {
    preview.innerHTML = '';
    imageFiles.forEach((file, index) => {
      const reader = new FileReader();
      reader.onload = e => {
        const card = document.createElement('div');
        card.classList.add('card');

        const imgContainer = document.createElement('div');
        imgContainer.classList.add('card-img-container');

        const img = document.createElement('img');
        img.src = e.target.result;
        img.classList.add('card-img-top');

        const removeBtn = document.createElement('button');
        removeBtn.classList.add('remove-btn');
        removeBtn.innerText = 'Ã—';
        removeBtn.onclick = () => {
          imageFiles.splice(index, 1);
          previewImages();
        };

        imgContainer.appendChild(img);
        imgContainer.appendChild(removeBtn);
        card.appendChild(imgContainer);
        preview.appendChild(card);
      };
      reader.readAsDataURL(file);
    });
  }

  convertBtn.addEventListener('click', async () => {
    if (imageFiles.length === 0) {
      alert("Please select some images first!");
      return;
    }

    const { jsPDF } = window.jspdf;
    const pageSize = pageSizeSelect.value;
    const orientation = orientationSelect.value;
    const pdf = new jsPDF(orientation, 'mm', pageSize);
    const pageWidth = pdf.internal.pageSize.getWidth();
    const pageHeight = pdf.internal.pageSize.getHeight();

    for (let i = 0; i < imageFiles.length; i++) {
      const imgData = await fileToDataURL(imageFiles[i]);
      await new Promise(resolve => {
        const img = new Image();
        img.src = imgData;
        img.onload = () => {
          let imgWidth = img.width;
          let imgHeight = img.height;
          const ratio = Math.min(pageWidth / imgWidth, pageHeight / imgHeight);
          imgWidth *= ratio;
          imgHeight *= ratio;
          const x = (pageWidth - imgWidth) / 2;
          const y = (pageHeight - imgHeight) / 2;
          if (i > 0) pdf.addPage();
          pdf.addImage(imgData, 'JPEG', x, y, imgWidth, imgHeight);
          resolve();
        };
      });
    }

    pdf.save('images.pdf');
  });

  function fileToDataURL(file) {
    return new Promise(resolve => {
      const reader = new FileReader();
      reader.onload = e => resolve(e.target.result);
      reader.readAsDataURL(file);
    });
  }
</script>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
